{% extends 'Market/base.html' %}
{% load static %}
{% block content %}


<style>
    .category-nav {
        background-color: #f8f9fa;
        padding: 15px 0;
        position: sticky;
        top: 60px;
        z-index: 10;
        border-bottom: 1px solid #ddd;
    }

    .category-nav a {
        margin: 0 15px;
        font-weight: bold;
        color: #333;
        text-decoration: none;
    }

    .category-nav a:hover {
        color: #d63384;
    }

    .category-section {
        padding: 50px 0;
        scroll-margin-top: 80px;
    }

    .menu-card {
        transition: transform 0.2s;
    }

    .menu-card:hover {
        transform: scale(1.03);
    }

    .menu-card img {
        height: 250px;
        object-fit: cover;
        width: 100%;
    }

    .card-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-top: 10px;
        border-top: 1px solid #eee;
        margin-top: auto;
    }

    .rating-controls {
        display: flex;
        align-items: center;
    }

    .rating-icons i {
        cursor: pointer;
        font-size: 1.2em;
        color: #6c757d;
    }

    .rating-icons i.liked {
        color: #28a745;
    }

    .rating-icons i.disliked {
        color: #dc3545;
    }

    .rating-count {
        font-size: 0.9em;
        color: #555;
        margin: 0 5px; /* Added some horizontal margin */
    }

    .rating-controls i:first-child {
        margin-right: 5px; /* Space between like icon and count */
    }

    .rating-controls span:first-of-type {
        margin-right: 10px; /* Space between like count and dislike icon */
    }

    .price {
        font-size: 1.3em;
        font-weight: bold;
        color: #007bff;
    }

    .card-body {
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }
</style>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<div class="category-nav text-center">
    <a href="#pizza">üçï –ü—ñ—Ü–∞</a>
    <a href="#sushi">üç£ –°—É—à—ñ</a>
    <a href="#salads">ü•ó –°–∞–ª–∞—Ç–∏</a>
    <a href="#drinks">ü•§ –ù–∞–ø–æ—ó</a>
    <a href="#desserts">üç∞ –î–µ—Å–µ—Ä—Ç–∏</a>
</div>

<div class="container">
    <div id="pizza" class="category-section">
        <h2 class="text-center mb-4">üçï –ü—ñ—Ü–∞</h2>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img.png' %}" class="card-img-top" alt="–ü—ñ—Ü–∞">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ü—ñ—Ü–∞ –ú–∞—Ä–≥–∞—Ä–∏—Ç–∞</h5>
                        <p class="card-text">–°–º–∞—á–Ω–∞ —ñ—Ç–∞–ª—ñ–π—Å—å–∫–∞ –ø—ñ—Ü–∞ –∑ —Å–∏—Ä–æ–º, —Ç–æ–º–∞—Ç–∞–º–∏ —Ç–∞ –±–∞–∑–∏–ª—ñ–∫–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">250 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="pizza-1" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="pizza-1">125</span>
                                <i class="far fa-thumbs-down" data-item-id="pizza-1" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="pizza-1">10</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_1.png' %}" class="card-img-top" alt="–ü—ñ—Ü–∞">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ü—ñ—Ü–∞ –ß–æ—Ç–∏—Ä–∏ —Å–∏—Ä–∏</h5>
                        <p class="card-text">–ù—ñ–∂–Ω–µ –ø–æ—î–¥–Ω–∞–Ω–Ω—è –º–æ—Ü–∞—Ä–µ–ª–∏, –¥–æ—Ä–±–ª—é, –ø–∞—Ä–º–µ–∑–∞–Ω—É —Ç–∞ –µ–º–º–µ–Ω—Ç–∞–ª—é.</p>
                        <div class="card-footer">
                            <span class="price">320 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="pizza-2" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="pizza-2">150</span>
                                <i class="far fa-thumbs-down" data-item-id="pizza-2" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="pizza-2">5</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_2.png' %}" class="card-img-top" alt="–ü—ñ—Ü–∞">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ü—ñ—Ü–∞ –°–∞–ª—è–º—ñ</h5>
                        <p class="card-text">–Ü—Ç–∞–ª—ñ–π—Å—å–∫–∞ –ø—ñ—Ü–∞ –∑ –ø—ñ–∫–∞–Ω—Ç–Ω–æ—é —Å–∞–ª—è–º—ñ —Ç–∞ —Ç–æ–º–∞—Ç–Ω–∏–º —Å–æ—É—Å–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">280 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="pizza-3" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="pizza-3">90</span>
                                <i class="far fa-thumbs-down" data-item-id="pizza-3" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="pizza-3">20</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_3.png' %}" class="card-img-top" alt="–ü—ñ—Ü–∞">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ü—ñ—Ü–∞ –∑ –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç–∞–º–∏</h5>
                        <p class="card-text">–ü—ñ—Ü–∞ –∑ –∫—Ä–µ–≤–µ—Ç–∫–∞–º–∏, –∫–∞–ª—å–º–∞—Ä–∞–º–∏, –º—ñ–¥—ñ—è–º–∏ —Ç–∞ –∞—Ä–æ–º–∞—Ç–Ω–∏–º–∏ —Å–ø–µ—Ü—ñ—è–º–∏.</p>
                        <div class="card-footer">
                            <span class="price">380 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="pizza-4" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="pizza-4">75</span>
                                <i class="far fa-thumbs-down" data-item-id="pizza-4" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="pizza-4">3</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_4.png' %}" class="card-img-top" alt="–ü—ñ—Ü–∞">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ü—ñ—Ü–∞ –∑ –∫—É—Ä–∫–æ—é —Ç–∞ –∞–Ω–∞–Ω–∞—Å–∞–º–∏</h5>
                        <p class="card-text">–°–æ–∫–æ–≤–∏—Ç–∞ –∫—É—Ä–∫–∞ –∑ —Å–æ–ª–æ–¥–∫–∏–º –∞–Ω–∞–Ω–∞—Å–æ–º —É –≤–µ—Ä—à–∫–æ–≤–æ–º—É —Å–æ—É—Å—ñ.</p>
                        <div class="card-footer">
                            <span class="price">300 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="pizza-5" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="pizza-5">110</span>
                                <i class="far fa-thumbs-down" data-item-id="pizza-5" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="pizza-5">15</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_5.png' %}" class="card-img-top" alt="–ü—ñ—Ü–∞">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ü—ñ—Ü–∞ –ú'—è—Å–Ω–∞</h5>
                        <p class="card-text">–ù–∞—Å–∏—á–µ–Ω–∏–π –º—ñ–∫—Å —ñ–∑ –±–µ–∫–æ–Ω—É, —Å–∞–ª—è–º—ñ —Ç–∞ –∫–æ–≤–±–∞—Å–æ–∫ —É —Ç–æ–º–∞—Ç–Ω–æ–º—É —Å–æ—É—Å—ñ.</p>
                        <div class="card-footer">
                            <span class="price">350 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="pizza-6" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="pizza-6">130</span>
                                <i class="far fa-thumbs-down" data-item-id="pizza-6" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="pizza-6">8</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="sushi" class="category-section">
        <h2 class="text-center mb-4">üç£ –°—É—à—ñ</h2>
        <div class="row">
            <div class="col-md-3 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_6.png' %}" class="card-img-top" alt="–°—É—à—ñ">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°—É—à—ñ –∑ –ª–æ—Å–æ—Å–µ–º</h5>
                        <p class="card-text">–ö–ª–∞—Å–∏—á–Ω—ñ —Å—É—à—ñ –∑ –Ω—ñ–∂–Ω–∏–º —Ñ—ñ–ª–µ –ª–æ—Å–æ—Å—è —Ç–∞ —Ä–∏—Å–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">150 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="sushi-1" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="sushi-1">80</span>
                                <i class="far fa-thumbs-down" data-item-id="sushi-1" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="sushi-1">2</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_7.png' %}" class="card-img-top" alt="–°—É—à—ñ">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°—É—à—ñ –∑ —Ç—É–Ω—Ü–µ–º</h5>
                        <p class="card-text">–°–≤—ñ–∂–∏–π —Ç—É–Ω–µ—Ü—å —É –¥—É–µ—Ç—ñ –∑ —è–ø–æ–Ω—Å—å–∫–∏–º —Ä–∏—Å–æ–º —Ç–∞ –Ω–æ—Ä—ñ.</p>
                        <div class="card-footer">
                            <span class="price">160 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="sushi-2" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="sushi-2">70</span>
                                <i class="far fa-thumbs-down" data-item-id="sushi-2" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="sushi-2">4</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_8.png' %}" class="card-img-top" alt="–°—É—à—ñ">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°—É—à—ñ –∑ –≤—É–≥—Ä–µ–º</h5>
                        <p class="card-text">–ö–æ–ø—á–µ–Ω–∏–π –≤—É–≥–æ—Ä –∑ —É–Ω–∞–≥—ñ-—Å–æ—É—Å–æ–º —ñ –∫—É–Ω–∂—É—Ç–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">180 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="sushi-3" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="sushi-3">65</span>
                                <i class="far fa-thumbs-down" data-item-id="sushi-3" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="sushi-3">1</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_9.png' %}" class="card-img-top" alt="–°—É—à—ñ">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°—É—à—ñ –∑ –∫—Ä–µ–≤–µ—Ç–∫–æ—é</h5>
                        <p class="card-text">–í–∞—Ä–µ–Ω–∞ —Ç–∏–≥—Ä–æ–≤–∞ –∫—Ä–µ–≤–µ—Ç–∫–∞ –∑ –≤–∞—Å–∞–±—ñ —Ç–∞ —Å–æ—î–≤–∏–º —Å–æ—É—Å–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">170 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="sushi-4" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="sushi-4">95</span>
                                <i class="far fa-thumbs-down" data-item-id="sushi-4" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="sushi-4">0</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="salads" class="category-section">
        <h2 class="text-center mb-4">ü•ó –°–∞–ª–∞—Ç–∏</h2>
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_10.png' %}" class="card-img-top" alt="–°–∞–ª–∞—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°–∞–ª–∞—Ç –≥—Ä–µ—Ü—å–∫–∏–π</h5>
                        <p class="card-text">–°–≤—ñ–∂—ñ –æ–≤–æ—á—ñ, —Ñ–µ—Ç–∞, –æ–ª–∏–≤–∫–∏ —Ç–∞ –æ–ª–∏–≤–∫–æ–≤–∞ –æ–ª—ñ—è.</p>
                        <div class="card-footer">
                            <span class="price">120 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="salad-1" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="salad-1">60</span>
                                <i class="far fa-thumbs-down" data-item-id="salad-1" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="salad-1">5</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_11.png' %}" class="card-img-top" alt="–°–∞–ª–∞—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°–∞–ª–∞—Ç –∑ –∞–≤–æ–∫–∞–¥–æ</h5>
                        <p class="card-text">–ê–≤–æ–∫–∞–¥–æ, –º—ñ–∫—Å —Å–∞–ª–∞—Ç—ñ–≤ —ñ –ª–µ–≥–∫–∏–π –ª–∏–º–æ–Ω–Ω–∏–π —Å–æ—É—Å.</p>
                        <div class="card-footer">
                            <span class="price">180 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="salad-2" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="salad-2">45</span>
                                <i class="far fa-thumbs-down" data-item-id="salad-2" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="salad-2">1</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_12.png' %}" class="card-img-top" alt="–°–∞–ª–∞—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä</h5>
                        <p class="card-text">–ö—É—Ä–∫–∞, –ª–∏—Å—Ç—è —Ä–æ–º–µ–π–Ω—É, —Å—É—Ö–∞—Ä–∏–∫–∏ —Ç–∞ –ø–∞—Ä–º–µ–∑–∞–Ω —É —Å–æ—É—Å—ñ.</p>
                        <div class="card-footer">
                            <span class="price">160 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="salad-3" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="salad-3">85</span>
                                <i class="far fa-thumbs-down" data-item-id="salad-3" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="salad-3">10</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_13.png' %}" class="card-img-top" alt="–°–∞–ª–∞—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°–∞–ª–∞—Ç –∑ –º—ñ–¥—ñ—è–º–∏</h5>
                        <p class="card-text">–¢–µ–ø–ª–∏–π —Å–∞–ª–∞—Ç –∑ –º—ñ–¥—ñ—è–º–∏, –æ–≤–æ—á–∞–º–∏ —Ç–∞ –ø—Ä—è–Ω–∏–º –¥—Ä–µ—Å—ñ–Ω–≥–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">200 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="salad-4" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="salad-4">50</span>
                                <i class="far fa-thumbs-down" data-item-id="salad-4" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="salad-4">2</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="drinks" class="category-section">
        <h2 class="text-center mb-4">ü•§ –ù–∞–ø–æ—ó</h2>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_14.png' %}" class="card-img-top" alt="–ù–∞–ø—ñ–π">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ö–æ–∫–∞ –∫–æ–ª–∞ 0.5</h5>
                        <p class="card-text">–ö–ª–∞—Å–∏—á–Ω–∏–π –æ—Å–≤—ñ–∂–∞—é—á–∏–π –Ω–∞–ø—ñ–π –∑—ñ –∑–Ω–∞–π–æ–º–∏–º —Å–º–∞–∫–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">40 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="drink-1" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="drink-1">200</span>
                                <i class="far fa-thumbs-down" data-item-id="drink-1" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="drink-1">15</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_15.png' %}" class="card-img-top" alt="–ù–∞–ø—ñ–π">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–§–∞–Ω—Ç–∞ 0.5</h5>
                        <p class="card-text">–ì–∞–∑–æ–≤–∞–Ω–∏–π –Ω–∞–ø—ñ–π –∑ —è—Å–∫—Ä–∞–≤–∏–º –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤–∏–º —Å–º–∞–∫–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">40 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="drink-2" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="drink-2">180</span>
                                <i class="far fa-thumbs-down" data-item-id="drink-2" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="drink-2">10</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_16.png' %}" class="card-img-top" alt="–ù–∞–ø—ñ–π">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–°–ø—Ä–∞–π—Ç 0.5</h5>
                        <p class="card-text">–õ–µ–≥–∫–∏–π –ª–∏–º–æ–Ω–Ω–æ-–ª–∞–π–º–æ–≤–∏–π –Ω–∞–ø—ñ–π –¥–ª—è —Å–ø—Ä–∞–≥–∏.</p>
                        <div class="card-footer">
                            <span class="price">40 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="drink-3" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="drink-3">190</span>
                                <i class="far fa-thumbs-down" data-item-id="drink-3" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="drink-3">8</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_23.png' %}" class="card-img-top" alt="–ù–∞–ø—ñ–π">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ú–æ—Ö—ñ—Ç–æ</h5>
                        <p class="card-text">–ê–ª–∫–æ–≥–æ–ª—å–Ω–∏–π –∫–æ–∫—Ç–µ–π–ª—å –∑ –ª–∞–π–º–æ–º, –º‚Äô—è—Ç–æ—é —Ç–∞ –ª—å–æ–¥–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">110 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="drink-4" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="drink-4">70</span>
                                <i class="far fa-thumbs-down" data-item-id="drink-4" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="drink-4">3</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_26.png' %}" class="card-img-top" alt="–ù–∞–ø—ñ–π">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ü—ñ–Ω–∞-–∫–æ–ª–∞–¥–∞</h5>
                        <p class="card-text">–ï–∫–∑–æ—Ç–∏—á–Ω–∏–π –º—ñ–∫—Å –∞–Ω–∞–Ω–∞—Å—É —Ç–∞ –∫–æ–∫–æ—Å—É.</p>
                        <div class="card-footer">
                            <span class="price">130 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="drink-5" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="drink-5">55</span>
                                <i class="far fa-thumbs-down" data-item-id="drink-5" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="drink-5">1</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_25.png' %}" class="card-img-top" alt="–ù–∞–ø—ñ–π">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ë–ª–∞–∫–∏—Ç–Ω–∞ –ª–∞–≥—É–Ω–∞</h5>
                        <p class="card-text">–Ø—Å–∫—Ä–∞–≤–∏–π –ª–∏–º–æ–Ω–∞–¥ —ñ–∑ —Ü–∏—Ç—Ä—É—Å–æ–≤–∏–º —Å–º–∞–∫–æ–º —ñ –º‚Äô—è—Ç–æ—é.</p>
                        <div class="card-footer">
                            <span class="price">100 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="drink-6" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="drink-6">60</span>
                                <i class="far fa-thumbs-down" data-item-id="drink-6" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="drink-6">0</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="desserts" class="category-section">
        <h2 class="text-center mb-4">üç∞ –î–µ—Å–µ—Ä—Ç–∏</h2>
        <div class="row">
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_17.png' %}" class="card-img-top" alt="–î–µ—Å–µ—Ä—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ë—Ä–∞—É–Ω—ñ</h5>
                        <p class="card-text">–®–æ–∫–æ–ª–∞–¥–Ω–∏–π –¥–µ—Å–µ—Ä—Ç –∑ —Ö—Ä—É—Å—Ç–∫–æ—é —Å–∫–æ—Ä–∏–Ω–∫–æ—é —Ç–∞ –Ω—ñ–∂–Ω–æ—é —Å–µ—Ä—Ü–µ–≤–∏–Ω–æ—é.</p>
                        <div class="card-footer">
                            <span class="price">90 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="dessert-1" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="dessert-1">90</span>
                                <i class="far fa-thumbs-down" data-item-id="dessert-1" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="dessert-1">5</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_18.png' %}" class="card-img-top" alt="–î–µ—Å–µ—Ä—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ú–æ—Ç—ñ –∑ –º–∞–Ω–≥–æ</h5>
                        <p class="card-text">–Ø–ø–æ–Ω—Å—å–∫–∏–π —Ä–∏—Å–æ–≤–∏–π –¥–µ—Å–µ—Ä—Ç –∑ –Ω–∞—á–∏–Ω–∫–æ—é –∑ —Å–æ–∫–æ–≤–∏—Ç–æ–≥–æ –º–∞–Ω–≥–æ.</p>
                        <div class="card-footer">
                            <span class="price">120 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="dessert-2" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="dessert-2">70</span>
                                <i class="far fa-thumbs-down" data-item-id="dessert-2" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="dessert-2">2</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_19.png' %}" class="card-img-top" alt="–î–µ—Å–µ—Ä—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–¢—ñ—Ä–∞–º—ñ—Å—É</h5>
                        <p class="card-text">–Ü—Ç–∞–ª—ñ–π—Å—å–∫–∏–π –¥–µ—Å–µ—Ä—Ç –∑ –∫–∞–≤–æ–≤–∏–º –±—ñ—Å–∫–≤—ñ—Ç–æ–º —ñ –Ω—ñ–∂–Ω–∏–º –∫—Ä–µ–º–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">110 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="dessert-3" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="dessert-3">80</span>
                                <i class="far fa-thumbs-down" data-item-id="dessert-3" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="dessert-3">3</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_20.png' %}" class="card-img-top" alt="–î–µ—Å–µ—Ä—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ö—Ä–µ–º –±—Ä—é–ª–µ</h5>
                        <p class="card-text">–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω–∏–π –¥–µ—Å–µ—Ä—Ç —ñ–∑ –≤–∞–Ω—ñ–ª—å–Ω–∏–º –∫—Ä–µ–º–æ–º —ñ –∫–∞—Ä–∞–º–µ–ª—å–Ω–æ—é —Å–∫–æ—Ä–∏–Ω–∫–æ—é.</p>
                        <div class="card-footer">
                            <span class="price">100 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="dessert-4" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="dessert-4">60</span>
                                <i class="far fa-thumbs-down" data-item-id="dessert-4" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="dessert-4">1</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_21.png' %}" class="card-img-top" alt="–î–µ—Å–µ—Ä—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ß—ñ–∑–∫–µ–π–∫ –∑ —á–æ—Ä–Ω–∏—Ü–µ—é</h5>
                        <p class="card-text">–°–∏—Ä–Ω–∏–π –¥–µ—Å–µ—Ä—Ç —ñ–∑ —è–≥—ñ–¥–Ω–∏–º —Ç–æ–ø—ñ–Ω–≥–æ–º.</p>
                        <div class="card-footer">
                            <span class="price">130 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="dessert-5" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="dessert-5">95</span>
                                <i class="far fa-thumbs-down" data-item-id="dessert-5" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="dessert-5">4</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card menu-card h-100 shadow-sm d-flex flex-column">
                    <img src="{% static 'Market/imgs/img_22.png' %}" class="card-img-top" alt="–î–µ—Å–µ—Ä—Ç">
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">–ë–∞—É–Ω—Ç—ñ</h5>
                        <p class="card-text">–î–µ—Å–µ—Ä—Ç –∑ –∫–æ–∫–æ—Å–æ–≤–æ—é –Ω–∞—á–∏–Ω–∫–æ—é –≤ —à–æ–∫–æ–ª–∞–¥–Ω–æ–º—É –ø–æ–∫—Ä–∏—Ç—Ç—ñ.</p>
                        <div class="card-footer">
                            <span class="price">85 –≥—Ä–Ω</span>
                            <div class="rating-controls">
                                <i class="far fa-thumbs-up" data-item-id="dessert-6" data-rating-type="like"></i>
                                <span class="like-count" data-item-id="dessert-6">65</span>
                                <i class="far fa-thumbs-down" data-item-id="dessert-6" data-rating-type="dislike"></i>
                                <span class="dislike-count" data-item-id="dessert-6">0</span>
                            </div>
                        </div>
                        <button class="btn btn-success add-to-cart-btn" data-product-id="{{ product.id }}">–î–æ–¥–∞—Ç–∏ –¥–æ –∫–æ—à–∏–∫–∞</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const ratingControls = document.querySelectorAll('.rating-controls');

        // Initialize counts and user votes from localStorage
        ratingControls.forEach(control => {
            const likeIcon = control.querySelector('.fa-thumbs-up');
            const dislikeIcon = control.querySelector('.fa-thumbs-down');
            const likeCountSpan = control.querySelector('.like-count');
            const dislikeCountSpan = control.querySelector('.dislike-count');
            const itemId = likeIcon.dataset.itemId;

            // Get initial counts (these would come from your backend in a real app)
            let currentLikes = parseInt(likeCountSpan.textContent);
            let currentDislikes = parseInt(dislikeCountSpan.textContent);

            // Load user's previous vote for this item from localStorage
            const userVote = localStorage.getItem(`vote_${itemId}`); // 'liked', 'disliked', or null

            if (userVote === 'liked') {
                likeIcon.classList.add('liked', 'fas'); // Add 'fas' for solid icon
                likeIcon.classList.remove('far'); // Remove 'far' for regular icon
            } else if (userVote === 'disliked') {
                dislikeIcon.classList.add('disliked', 'fas');
                dislikeIcon.classList.remove('far');
            }

            // Add event listeners for each icon
            likeIcon.addEventListener('click', function() {
                handleVote(itemId, 'like', likeIcon, dislikeIcon, likeCountSpan, dislikeCountSpan, currentLikes, currentDislikes);
            });

            dislikeIcon.addEventListener('click', function() {
                handleVote(itemId, 'dislike', dislikeIcon, likeIcon, dislikeCountSpan, likeCountSpan, currentDislikes, currentLikes);
            });
        });

        function handleVote(itemId, voteType, clickedIcon, otherIcon, clickedCountSpan, otherCountSpan, clickedCurrentCount, otherCurrentCount) {
            let currentLikes = parseInt(document.querySelector(`.like-count[data-item-id="${itemId}"]`).textContent);
            let currentDislikes = parseInt(document.querySelector(`.dislike-count[data-item-id="${itemId}"]`).textContent);
            const userVote = localStorage.getItem(`vote_${itemId}`);

            let newLikes = currentLikes;
            let newDislikes = currentDislikes;
            let action = null; // 'like', 'dislike', 'unlike', 'undislike', 'change_to_like', 'change_to_dislike'

            if (voteType === 'like') {
                if (userVote === 'liked') {
                    // User already liked, unliking
                    clickedIcon.classList.remove('liked', 'fas');
                    clickedIcon.classList.add('far');
                    newLikes--;
                    localStorage.removeItem(`vote_${itemId}`);
                    action = 'unlike';
                } else if (userVote === 'disliked') {
                    // User disliked, changing to like
                    clickedIcon.classList.add('liked', 'fas');
                    clickedIcon.classList.remove('far');
                    otherIcon.classList.remove('disliked', 'fas');
                    otherIcon.classList.add('far');
                    newLikes++;
                    newDislikes--;
                    localStorage.setItem(`vote_${itemId}`, 'liked');
                    action = 'change_to_like';
                } else {
                    // User hasn't voted, liking
                    clickedIcon.classList.add('liked', 'fas');
                    clickedIcon.classList.remove('far');
                    newLikes++;
                    localStorage.setItem(`vote_${itemId}`, 'liked');
                    action = 'like';
                }
            } else if (voteType === 'dislike') {
                if (userVote === 'disliked') {
                    // User already disliked, undisliking
                    clickedIcon.classList.remove('disliked', 'fas');
                    clickedIcon.classList.add('far');
                    newDislikes--;
                    localStorage.removeItem(`vote_${itemId}`);
                    action = 'undislike';
                } else if (userVote === 'liked') {
                    // User liked, changing to dislike
                    clickedIcon.classList.add('disliked', 'fas');
                    clickedIcon.classList.remove('far');
                    otherIcon.classList.remove('liked', 'fas');
                    otherIcon.classList.add('far');
                    newDislikes++;
                    newLikes--;
                    localStorage.setItem(`vote_${itemId}`, 'disliked');
                    action = 'change_to_dislike';
                } else {
                    // User hasn't voted, disliking
                    clickedIcon.classList.add('disliked', 'fas');
                    clickedIcon.classList.remove('far');
                    newDislikes++;
                    localStorage.setItem(`vote_${itemId}`, 'disliked');
                    action = 'dislike';
                }
            }

            // Update displayed counts
            document.querySelector(`.like-count[data-item-id="${itemId}"]`).textContent = newLikes;
            document.querySelector(`.dislike-count[data-item-id="${itemId}"]`).textContent = newDislikes;
        }

        // Function to get CSRF token (needed for Django POST requests)
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== '') {
                const cookies = document.cookie.split(';');
                for (let i = 0; i < cookies.length; i++) {
                    const cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + '=')) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
    });
    document.querySelectorAll('.add-to-cart-btn').forEach(button => {
        button.addEventListener('click', function () {
            const productId = this.dataset.productId;
            fetch("{% url 'Market:add_to_cart' %}", {
                method: "POST",
                headers: {
                    "X-CSRFToken": "{{ csrf_token }}",
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ product_id: productId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("–¢–æ–≤–∞—Ä –¥–æ–¥–∞–Ω–æ –¥–æ –∫–æ—à–∏–∫–∞!");
                    // –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –æ–Ω–æ–≤–∏—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –∫–æ—à–∏–∫–∞
                    location.reload();
                }
            });
        });
    });
</script>

{% endblock %}